<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>Shopping Cart</title>
<div th:replace="fragments/header :: header-css" />
</head>
<body>
	<!-- Header -->
	<div th:replace="fragments/header :: header" />

	<!-- Menu -->
	<div th:replace="fragments/menu :: menu" />

	<fmt:setLocale value="en_US" scope="session" />

	<div class="page-title">My Cart</div>

	<c:if test="${empty cartForm or empty cartForm.cartLines}">
		<h2>There is no items in Cart</h2>
		<a href="${pageContext.request.contextPath}/productList">Show
			Product List</a>
	</c:if>

	<c:if test="${not empty cartForm and not empty cartForm.cartLines   }">
		<form:form method="POST" modelAttribute="cartForm"
			action="${pageContext.request.contextPath}/shoppingCart">

			<c:forEach items="${cartForm.cartLines}" var="cartLineInfo"
				varStatus="varStatus">
				<div class="product-preview-container">
					<ul>
						<li><img class="product-image"
							src="${pageContext.request.contextPath}/productImage?code=${cartLineInfo.productInfo.code}" />
						</li>
						<li>Code: ${cartLineInfo.productInfo.code} <form:hidden
								path="cartLines[${varStatus.index}].productInfo.code" />

						</li>
						<li>Name: ${cartLineInfo.productInfo.name}</li>
						<li>Price: <span class="price"> <fmt:formatNumber
									value="${cartLineInfo.productInfo.price}" type="currency" />

						</span></li>
						<li>Quantity: <form:input
								path="cartLines[${varStatus.index}].quantity" /></li>
						<li>Subtotal: <span class="subtotal"> <fmt:formatNumber
									value="${cartLineInfo.amount}" type="currency" />

						</span>
						</li>
						<li><a
							href="${pageContext.request.contextPath}/shoppingCartRemoveProduct?code=${cartLineInfo.productInfo.code}">
								Delete </a></li>
					</ul>
				</div>
			</c:forEach>
			<div style="clear: both"></div>
			<input class="button-update-sc" type="submit" value="Update Quantity" />
			<a class="navi-item"
				href="${pageContext.request.contextPath}/shoppingCartCustomer">Enter
				Customer Info</a>
			<a class="navi-item"
				href="${pageContext.request.contextPath}/productList">Continue
				Buy</a>
		</form:form>


	</c:if>


	<!-- Footer -->
	<div th:replace="fragments/footer :: footer" />


</body>
</html>