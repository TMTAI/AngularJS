<#import "../layout/defaultLayout.ftl.html" as layout>
    <@layout.myLayout "Home page">
    <body ng-app="myApp">
    <div layout="column" layout-fill style="max-height: 100%" ng-controller="HomeCtrl">
        <!--<md-progress-linear md-mode="determinate" style="background-color: #9E9E9E"></md-progress-linear>-->
        <div layout-fill id="index">
            <div style="height: 890px" flex layout="row" layout-align="start start" class="md-block">
                <!-- Container left -->
                <div id="left" flex="15" layout="row" layout-fill>
                    <md-sidenav
                            class="md-sidenav-left"
                            md-component-id="left"
                            md-is-locked-open="$mdMedia('gt-md')"
                            md-whiteframe="5">
                        <md-list flex laout="row" layout-fill>
                            <md-list-item ng-repeat="tp in thanhpho" layout="row" flex">
                                <div layout="column">
                                    <h4>{{tp.tentp}}</h4>
                                    <md-list layout="column">
                                        <md-list-item ng-repeat="kv in khuvuc" layout="row" ng-click="khuVucItemClick(kv)" ng-hide="hiden" >
                                            <h5>
                                                {{kv.matp == tp.matp ? kv.tenkv : hiden = true}}
                                            </h5>
                                        </md-list-item>
                                    </md-list>
                                </div>
                            </md-list-item>
                        </md-list>

                    </md-sidenav>
                </div>
                <!-- Container right -->
                <div id="right" flex="85" layout-padding class="my-padding" flex layout-fill style="height: 100%; width: 100%">
                    <div ng-if="hidenTable" layout="column" layout-align="center center">
                        Not page found
                    </div>
                    <div ng-hide="hidenTable">
                        <div  layout="row" layout-align="start center">
                            <h4>Danh Sach Khach Hang</h4>

                            <div layout = "row" layout-align="end center" flex>
                                <md-button class="md-icon-button" ng-if="currentDashboard.owner == name" ng-click="editSonarGagdget(item, $events)">
                                    <md-tooltip md-direction="bottom">Add</md-tooltip>
                                    <md-icon aria-label="" class="material-icons">add</md-icon>
                                </md-button>

                                <md-button class="md-icon-button" ng-click="updateViewsGadget()">
                                    <md-tooltip md-direction="bottom">Update</md-tooltip>
                                    <md-icon aria-label="" class="material-icons">update</md-icon>
                                </md-button>

                                <md-button class="md-icon-button" ng-click="hide=!hide">
                                    <md-tooltip md-direction="bottom">Toogke View</md-tooltip>
                                    <md-icon ng-if="!hide" aria-label="" class="material-icons">keyboard_arrow_up</md-icon>
                                    <md-icon ng-if="hide" aria-label="" class="material-icons">keyboard_arrow_down</md-icon>
                                </md-button>
                            </div>
                        </div>
                        <table class="responstable" style="width: 100%">
                            <thead>
                            <tr>
                                <th>Index</th>
                                <th>Ma Khach Hang</th>
                                <th>Ten Khang Hang</th>
                                <th>Dia chi</th>
                                <th>Khu Vuc</th>
                                <th>CMND</th>
                                <th>Gioi Tinh</th>
                                <th>Phone</th>
                                <th></th>
                            </tr>
                            </thead>
                            <tbody ng-repeat="kh in listKhachHang">
                            <tr ng-click="thongTinhDienKe(kh)">
                                <td>{{$index + 1}}</td>
                                <td>{{kh.makh}}</td>
                                <td>{{kh.tenkh}}</td>
                                <td>{{kh.diachi}}</td>
                                <td>{{tenKhuVuc}}</td>
                                <td>{{kh.cmnd}}</td>
                                <td>{{kh.gioitinh}}</td>
                                <td>{{kh.phone}}</td>
                                <td layout=""row>
                                    <md-button class="md-icon-button" ng-if="currentDashboard.owner == name" ng-click="editKhachHang(kh)">
                                        <md-tooltip md-direction="bottom">Edit</md-tooltip>
                                        <md-icon aria-label="" class="material-icons">edit</md-icon>
                                    </md-button>
                                    <md-button class="md-icon-button" ng-if="currentDashboard.owner == name" ng-click="deleteKhachHang(kh)">
                                        <md-tooltip md-direction="bottom">Delete</md-tooltip>
                                        <md-icon aria-label="" class="material-icons">delete</md-icon>
                                    </md-button>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                    <div ng-hide="hidenTableDienKe">
                        <div  layout="row" layout-align="start center">
                            <div layout = "row" layout-align="end center" flex>
                                <md-button class="md-icon-button" ng-if="currentDashboard.owner == name" ng-click="showAddDienKe($event)">
                                    <md-tooltip md-direction="bottom">Add Dien Ke</md-tooltip>
                                    <md-icon aria-label="" class="material-icons">add</md-icon>
                                </md-button>
                            </div>
                        </div>
                        <table class="responstable" style="width: 100%">
                            <thead>
                            <tr>
                                <th>Index</th>
                                <th>Ma Dien Ke</th>
                                <th>Ma Khach Hang</th>
                                <th>Thang</th>
                                <th>Nam</th>
                                <th>Chi so cu</th>
                                <th>Chi so moi</th>
                                <th>Thanh Tien</th>
                                <th></th>
                            </tr>
                            </thead>
                            <tbody ng-repeat="dk in listDienKe">
                            <tr>
                                <td>{{$index + 1}}</td>
                                <td>{{dk.madk}}</td>
                                <td>{{dk.makh}}</td>
                                <td>{{dk.mathang}}</td>
                                <td>{{dk.manam}}</td>
                                <td>{{dk.chisocu}}</td>
                                <td>
                                    <input type="number" ng-model=dk.chisomoi style="width: 80px">
                                </td>
                                <td>{{dk.thanhtien | currency: 'VND ' : 0}}</td>
                                <td>
                                    <md-button class="md-icon-button" ng-if="currentDashboard.owner == name" ng-click="updateChiSoDien(dk)">
                                        <md-tooltip md-direction="bottom">Edit</md-tooltip>
                                        <md-icon aria-label="" class="material-icons">edit</md-icon>
                                    </md-button>
                                    <md-button class="md-icon-button" ng-if="currentDashboard.owner == name" ng-click="deleteKhachHang(dk)">
                                        <md-tooltip md-direction="bottom">Delete</md-tooltip>
                                        <md-icon aria-label="" class="material-icons">delete</md-icon>
                                    </md-button>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </body>
</@layout.myLayout>